exports.id=729,exports.ids=[729],exports.modules={55604:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=55604,e.exports=t},244:()=>{},25903:()=>{},90383:(e,t,s)=>{Promise.resolve().then(s.bind(s,42139)),Promise.resolve().then(s.bind(s,50561)),Promise.resolve().then(s.bind(s,50018)),Promise.resolve().then(s.bind(s,74071)),Promise.resolve().then(s.bind(s,5122)),Promise.resolve().then(s.bind(s,77040)),Promise.resolve().then(s.bind(s,23726)),Promise.resolve().then(s.bind(s,74008)),Promise.resolve().then(s.bind(s,65143)),Promise.resolve().then(s.bind(s,15659)),Promise.resolve().then(s.bind(s,71956))},86728:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,59994,23)),Promise.resolve().then(s.t.bind(s,17548,23)),Promise.resolve().then(s.t.bind(s,37362,23)),Promise.resolve().then(s.t.bind(s,9644,23)),Promise.resolve().then(s.t.bind(s,12623,23)),Promise.resolve().then(s.t.bind(s,53479,23))},3702:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var r=s(56567),n=s(1861),o=s(10864),i=s(28194),a=s(34777);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...i},l)=>{let d=n?o.g7:"button";return r.jsx(d,{className:(0,a.cn)(c({variant:t,size:s,className:e})),ref:l,...i})});l.displayName="Button"},42139:(e,t,s)=>{"use strict";s.d(t,{useFocusRestore:()=>o,useFocusTrap:()=>n});var r=s(1861);function n(e=!0){let t=(0,r.useRef)(null);(0,r.useRef)(null),(0,r.useRef)(null);let s=(0,r.useCallback)(()=>t.current?Array.from(t.current.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"]), [contenteditable]')):[],[]);return(0,r.useCallback)(t=>{if(!e||"Tab"!==t.key)return;let r=s();if(0===r.length)return;let n=r[0],o=r[r.length-1];t.shiftKey?document.activeElement===n&&(t.preventDefault(),o.focus()):document.activeElement===o&&(t.preventDefault(),n.focus())},[e,s]),t}function o(){let e=(0,r.useRef)(null);return{saveFocus:(0,r.useCallback)(()=>{e.current=document.activeElement},[]),restoreFocus:(0,r.useCallback)(()=>{e.current&&(e.current.focus(),e.current=null)},[])}}},50561:(e,t,s)=>{"use strict";s.d(t,{useArrowNavigation:()=>o,useEscapeKey:()=>i});var r=s(1861);let n={ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",HOME:"Home",END:"End"};function o(e,t={}){let{wrap:s=!0,direction:o="vertical"}=t,i=(0,r.useCallback)(()=>e.current?Array.from(e.current.querySelectorAll('button:not([disabled]), a[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]), [role="button"]:not([aria-disabled="true"]), [role="menuitem"]:not([aria-disabled="true"])')):[],[]);return(0,r.useCallback)(e=>{let t=i();if(0===t.length)return;let r=t.findIndex(e=>e===document.activeElement);if(-1===r)return;let a=r,c=!1;switch(e.key){case n.ARROW_DOWN:("vertical"===o||"both"===o)&&((a=r+1)>=t.length&&(a=s?0:t.length-1),c=!0);break;case n.ARROW_UP:("vertical"===o||"both"===o)&&((a=r-1)<0&&(a=s?t.length-1:0),c=!0);break;case n.ARROW_RIGHT:("horizontal"===o||"both"===o)&&((a=r+1)>=t.length&&(a=s?0:t.length-1),c=!0);break;case n.ARROW_LEFT:("horizontal"===o||"both"===o)&&((a=r-1)<0&&(a=s?t.length-1:0),c=!0);break;case n.HOME:a=0,c=!0;break;case n.END:a=t.length-1,c=!0}c&&(e.preventDefault(),t[a]?.focus())},[i,o,s])}function i(e,t=!0){}},50018:(e,t,s)=>{"use strict";s.d(t,{useReducedMotion:()=>n});var r=s(1861);function n(){let[e,t]=(0,r.useState)(!1);return{prefersReducedMotion:e,getAnimationConfig:(0,r.useCallback)(t=>({duration:e?0:t,easing:e?"linear":"ease-out"}),[e])}}},74071:(e,t,s)=>{"use strict";s.d(t,{LiveRegion:()=>a,XE:()=>o,h7:()=>i});var r=s(56567),n=s(1861);function o(){let e=(0,n.useRef)(null);return{announce:(t,s="polite",r=100)=>{e.current&&(e.current.textContent=""),setTimeout(()=>{if(!e.current){let t=document.createElement("div");t.setAttribute("aria-live",s),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.style.position="absolute",t.style.left="-10000px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",document.body.appendChild(t),e.current=t}e.current.setAttribute("aria-live",s),e.current.textContent=t},r)},clear:()=>{e.current&&(e.current.textContent="")}}}let i={loading:e=>e?`Loading ${e}`:"Loading",loaded:e=>e?`${e} loaded successfully`:"Content loaded successfully",error:(e,t)=>{let s=e?`Error loading ${e}`:"An error occurred";return t?`${s}: ${t}`:s},saved:e=>e?`${e} saved successfully`:"Changes saved successfully",deleted:e=>e?`${e} deleted successfully`:"Item deleted successfully",updated:e=>e?`${e} updated successfully`:"Content updated successfully",progress:(e,t,s)=>{let r=`Progress: ${Math.round(e/t*100)}%`;return s?`${r} - ${s}`:r}};function a({message:e,priority:t="polite",clearDelay:s=5e3}){let o=(0,n.useRef)(null);return r.jsx("div",{ref:o,"aria-live":t,"aria-atomic":"true",className:"sr-only",style:{position:"absolute",left:"-10000px",width:"1px",height:"1px",overflow:"hidden"}})}},5122:(e,t,s)=>{"use strict";s.d(t,{ReactQueryProvider:()=>d});var r=s(56567),n=s(11325),o=s(31866),i=s(24461),a=s(1861);let c={NETWORK:"NETWORK_ERROR",TIMEOUT:"TIMEOUT_ERROR",SERVER:"SERVER_ERROR",CLIENT:"CLIENT_ERROR",UNKNOWN:"UNKNOWN_ERROR"};function l(e){if(e instanceof Error){let t=e.message.toLowerCase();if(t.includes("network")||t.includes("fetch"))return c.NETWORK;if(t.includes("timeout"))return c.TIMEOUT}if("object"==typeof e&&null!==e&&e.status){if(e.status>=500)return c.SERVER;if(e.status>=400)return c.CLIENT}return c.UNKNOWN}function d({children:e}){let[t]=(0,a.useState)(()=>new n.S({defaultOptions:{queries:{staleTime:3e5,refetchOnWindowFocus:!1,retry:(e,t)=>{let s=l(t);return s!==c.CLIENT&&e<3&&[c.NETWORK,c.TIMEOUT,c.SERVER].includes(s)},retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4)+1e3*Math.random(),refetchOnWindowFocus:"always",refetchOnReconnect:"always",keepPreviousData:!0,networkMode:"offlineFirst"},mutations:{retry:(e,t)=>{let s=l(t);return s!==c.CLIENT&&e<1&&[c.NETWORK,c.SERVER].includes(s)},retryDelay:2e3,networkMode:"offlineFirst"}},mutationCache:{onError:(e,t,s,r)=>{console.error("Mutation error:",{error:e,mutationKey:r.options.mutationKey,variables:t})}},queryCache:{onError:(e,t)=>{console.error("Query error:",{error:e,queryKey:t.queryKey})}}}));return(0,r.jsxs)(o.aH,{client:t,children:[e,r.jsx(i.t,{initialIsOpen:!1})]})}},77040:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>d,a:()=>u});var r=s(56567),n=s(1861),o=s(61417),i=s(49725);let a=(e,t)=>{switch(t.type){case"AUTH_START":return{...e,isLoading:!0,error:null};case"AUTH_SUCCESS":return{user:t.payload.user,token:t.payload.token,isAuthenticated:!0,isLoading:!1,error:null};case"AUTH_ERROR":return{user:null,token:null,isAuthenticated:!1,isLoading:!1,error:t.payload};case"AUTH_LOGOUT":return{user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null};case"AUTH_INIT":if(t.payload)return{user:t.payload.user,token:t.payload.token,isAuthenticated:!0,isLoading:!1,error:null};return{user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null};default:return e}},c=(0,n.createContext)(void 0),l={user:null,token:null,isAuthenticated:!1,isLoading:!0,error:null},d=({children:e,apiBaseUrl:t=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001"})=>{let[s,d]=(0,n.useReducer)(a,l),u=(0,n.useCallback)(()=>{let e=o.q.getToken(),t=o.q.getUser();e&&t&&!o.l.isTokenExpired(e)?d({type:"AUTH_INIT",payload:{user:t,token:e}}):(o.q.clearAll(),d({type:"AUTH_INIT",payload:null}))},[]),h=(0,n.useCallback)(async e=>{d({type:"AUTH_START"});try{let s=await fetch(`${t}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||"Login failed")}let r=await s.json();o.q.setToken(r.token),o.q.setUser(r.user),d({type:"AUTH_SUCCESS",payload:{user:r.user,token:r.token}})}catch(e){throw d({type:"AUTH_ERROR",payload:e instanceof Error?e.message:"Login failed"}),e}},[t]),m=(0,n.useCallback)(async()=>{try{let e=o.q.getToken();e&&await fetch(`${t}/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${e}`}}).catch(()=>{})}finally{o.q.clearAll(),d({type:"AUTH_LOGOUT"})}},[t]),p=(0,n.useCallback)(async()=>{let e=o.q.getRefreshToken();if(!e){m();return}try{let s=await fetch(`${t}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(!s.ok)throw Error("Token refresh failed");let r=await s.json();o.q.setToken(r.token),o.q.setUser(r.user),d({type:"AUTH_SUCCESS",payload:{user:r.user,token:r.token}})}catch(e){m()}},[t,m]);(0,n.useEffect)(()=>{if(!s.token)return;let e=setInterval(()=>{o.l.isTokenExpired(s.token)&&p()},6e4);return()=>clearInterval(e)},[s.token,p]),(0,n.useEffect)(()=>{u()},[u]);let f=(0,i.qL)(s.user),g={...s,login:h,logout:m,refreshToken:p,permissions:f};return r.jsx(c.Provider,{value:g,children:e})},u=()=>{let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},49725:(e,t,s)=>{"use strict";s.d(t,{qL:()=>o});class r{constructor(e){this.user=e}hasPermission(e){return!!this.user&&("admin"===this.user.role||this.user.permissions.includes(e))}hasAnyPermission(e){return!!this.user&&e.some(e=>this.hasPermission(e))}hasAllPermissions(e){return!!this.user&&e.every(e=>this.hasPermission(e))}hasRole(e){return!!this.user&&this.user.role===e}canAccessResource(e,t){let s=`${e}:${t}`;return this.hasPermission(s)}}class n{static{this.hierarchy={viewer:1,user:2,admin:3}}static hasMinimumRole(e,t){return this.hierarchy[e]>=this.hierarchy[t]}static canElevateToRole(e,t){return"admin"===t?"admin"===e:"user"!==t||"admin"===e||"user"===e}}let o=e=>{let t=new r(e);return{can:e=>t.hasPermission(e),canAny:e=>t.hasAnyPermission(e),canAll:e=>t.hasAllPermissions(e),isRole:e=>t.hasRole(e),isAdmin:()=>t.hasRole("admin"),isUser:()=>t.hasRole("user"),isViewer:()=>t.hasRole("viewer"),canManageTasks:()=>t.canAccessResource("tasks","create")||t.canAccessResource("tasks","update")||t.canAccessResource("tasks","delete"),canViewTasks:()=>t.canAccessResource("tasks","read"),canAccessDashboard:()=>t.canAccessResource("dashboard","read"),canManageUsers:()=>t.hasRole("admin"),showIfCan:(e,s)=>t.hasPermission(e)?s:null,showIfRole:(e,s)=>t.hasRole(e)?s:null,showIfMinRole:(t,s)=>e&&n.hasMinimumRole(e.role,t)?s:null}}},61417:(e,t,s)=>{"use strict";s.d(t,{l:()=>a,q:()=>c});let r="auth_token",n="auth_user",o="refresh_token";class i{isLocalStorageAvailable(){try{let e="test";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}setItem(e,t){if(this.isLocalStorageAvailable())localStorage.setItem(e,t);else try{sessionStorage.setItem(e,t)}catch{console.warn("Storage not available")}}getItem(e){if(this.isLocalStorageAvailable())return localStorage.getItem(e);try{return sessionStorage.getItem(e)}catch{return null}}removeItem(e){if(this.isLocalStorageAvailable())localStorage.removeItem(e);else try{sessionStorage.removeItem(e)}catch{}}getToken(){return this.getItem(r)}setToken(e){this.setItem(r,e)}removeToken(){this.removeItem(r)}getRefreshToken(){return this.getItem(o)}setRefreshToken(e){this.setItem(o,e)}removeRefreshToken(){this.removeItem(o)}getUser(){let e=this.getItem(n);if(!e)return null;try{return JSON.parse(e)}catch{return null}}setUser(e){this.setItem(n,JSON.stringify(e))}removeUser(){this.removeItem(n)}clearAll(){this.removeToken(),this.removeRefreshToken(),this.removeUser()}}class a{static decodePayload(e){try{let t=e.split(".");if(3!==t.length)return null;let s=t[1],r=atob(s.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(r)}catch{return null}}static isTokenExpired(e){let t=this.decodePayload(e);if(!t||!t.exp)return!0;let s=Math.floor(Date.now()/1e3);return t.exp<s}static getTokenExpiration(e){let t=this.decodePayload(e);return t&&t.exp?new Date(1e3*t.exp):null}static extractUserFromToken(e){let t=this.decodePayload(e);return t?{id:t.sub,email:t.email,role:t.role,permissions:t.permissions||[]}:null}}let c=new i},23726:(e,t,s)=>{"use strict";s.d(t,{InstallPrompt:()=>c,Z:()=>l});var r=s(56567),n=s(1861),o=s(3702),i=s(42163),a=s(44520);function c({onInstall:e,onDismiss:t,className:s}){let[c,l]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),p=async()=>{if(c)try{await c.prompt();let t=await c.userChoice;"accepted"===t.outcome?(console.log("User accepted the install prompt"),e?.()):console.log("User dismissed the install prompt"),l(null),u(!1)}catch(e){console.error("Error during installation:",e)}},f=()=>{u(!1),t?.()};return!h&&d&&c?(0,r.jsxs)("div",{className:`
      fixed bottom-4 left-4 right-4 z-50
      bg-white dark:bg-gray-800
      border border-gray-200 dark:border-gray-700
      rounded-lg shadow-lg p-4
      sm:left-auto sm:right-4 sm:max-w-sm
      ${s}
    `,children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 mr-3",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Install CC Task Manager"}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Install the app for faster access and offline functionality"})]}),r.jsx(o.z,{variant:"ghost",size:"sm",onClick:f,className:"p-1 h-auto",children:r.jsx(i.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,r.jsxs)(o.z,{onClick:p,size:"sm",className:"flex-1 text-xs",children:[r.jsx(a.Z,{className:"h-3 w-3 mr-1"}),"Install"]}),r.jsx(o.z,{variant:"outline",onClick:f,size:"sm",className:"text-xs",children:"Later"})]})]}):null}let l=c},74008:(e,t,s)=>{"use strict";s.d(t,{OfflineIndicator:()=>d,Z:()=>u});var r=s(56567),n=s(1861),o=s(23984),i=s(36156),a=s(66517),c=s(3702),l=s(31733);function d({className:e}){let[t,s]=(0,n.useState)(l.x.getState()),[d,u]=(0,n.useState)(!1),h=async()=>{u(!0);try{await fetch("/api/health",{cache:"no-cache"})}catch(e){console.log("Still offline, retry failed")}finally{setTimeout(()=>u(!1),1e3)}};return t.isOffline?r.jsx("div",{className:`
      fixed top-16 left-1/2 transform -translate-x-1/2 z-50
      bg-orange-100 dark:bg-orange-900/50
      border border-orange-200 dark:border-orange-800
      rounded-lg shadow-lg p-3
      ${e}
    `,children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(o.Z,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-orange-800 dark:text-orange-200",children:"You're offline"}),r.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-300",children:"Some features may be limited"})]}),(0,r.jsxs)(c.z,{variant:"outline",size:"sm",onClick:h,disabled:d,className:"text-xs h-7 px-2 border-orange-300 text-orange-700 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-300 dark:hover:bg-orange-900",children:[d?r.jsx(i.Z,{className:"h-3 w-3 animate-spin"}):r.jsx(a.Z,{className:"h-3 w-3"}),d?"Retrying...":"Retry"]})]})}):null}let u=d},65143:(e,t,s)=>{"use strict";s.d(t,{PWAProvider:()=>u,usePWA:()=>h});var r=s(56567),n=s(1861),o=s(31733);class i{constructor(){this.queue=new Map,this.storageKey="cc-task-manager-sync-queue",this.defaultOptions={maxRetries:3,retryDelay:5e3,queueName:"background-sync"},this.isSupported="serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype,this.loadQueue()}async register(e,t={}){let s={...this.defaultOptions,...t},r=this.generateId(),n={id:r,timestamp:Date.now(),retryCount:0,maxRetries:s.maxRetries,...e};if(this.queue.set(r,n),this.saveQueue(),this.isSupported)try{let e=await navigator.serviceWorker.ready;await e.sync.register(s.queueName),console.log("Background sync registered:",r)}catch(e){console.error("Failed to register background sync:",e),this.processItem(n)}else this.processItem(n);return r}async processItem(e){try{if(await this.executeSync(e))return this.queue.delete(e.id),this.saveQueue(),console.log("Sync item processed successfully:",e.id),!0;return e.retryCount++,e.retryCount>=e.maxRetries?(console.error("Sync item exceeded max retries, removing:",e.id),this.queue.delete(e.id),this.saveQueue()):(console.log(`Sync item failed, will retry (${e.retryCount}/${e.maxRetries}):`,e.id),this.saveQueue(),setTimeout(()=>this.processItem(e),this.defaultOptions.retryDelay)),!1}catch(e){return console.error("Error processing sync item:",e),!1}}async processQueue(){console.log(`Processing sync queue with ${this.queue.size} items`);let e=Array.from(this.queue.values()).map(e=>this.processItem(e));await Promise.all(e)}async executeSync(e){let t=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001";try{let s;switch(e.type){case"task_create":s=await fetch(`${t}/api/tasks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;case"task_update":s=await fetch(`${t}/api/tasks/${e.data.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;case"task_delete":s=await fetch(`${t}/api/tasks/${e.data.id}`,{method:"DELETE"});break;case"user_action":s=await fetch(`${t}/api/actions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;default:return console.error("Unknown sync type:",e.type),!1}return s.ok}catch(e){return console.error("Sync execution failed:",e),!1}}getQueueStatus(){return{size:this.queue.size,items:Array.from(this.queue.values()),isSupported:this.isSupported}}clearQueue(){this.queue.clear(),this.saveQueue()}removeItem(e){let t=this.queue.delete(e);return t&&this.saveQueue(),t}loadQueue(){try{let e=localStorage.getItem(this.storageKey);if(e){let t=JSON.parse(e);this.queue=new Map(t.map(e=>[e.id,e]))}}catch(e){console.error("Failed to load sync queue:",e),this.queue=new Map}}saveQueue(){try{let e=Array.from(this.queue.values());localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.error("Failed to save sync queue:",e)}}generateId(){return`sync_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}let a=new i;var c=s(23726),l=s(74008);let d=(0,n.createContext)(null);function u({children:e,showInstallPrompt:t=!0,showOfflineIndicator:s=!0}){let[i,u]=(0,n.useState)(o.x.getState()),[h,m]=(0,n.useState)([]),[p,f]=(0,n.useState)(!1),g=(0,n.useCallback)(async()=>{await o.x.skipWaiting(),window.location.reload()},[]),b=(0,n.useCallback)(async e=>{let t=await a.register(e);return m(a.getQueueStatus().items),t},[]),y=(0,n.useCallback)(async()=>await o.x.requestNotificationPermission(),[]),k=(0,n.useCallback)(async(e,t)=>{await o.x.showNotification(e,t)},[]),v={serviceWorkerState:i,syncQueue:h,isUpdateAvailable:i.isUpdateAvailable,isOffline:i.isOffline,canInstall:o.x.canInstall(),updateServiceWorker:g,registerBackgroundSync:b,showInstallPrompt:p,setShowInstallPrompt:f,requestNotificationPermission:y,showNotification:k};return(0,r.jsxs)(d.Provider,{value:v,children:[e,t&&r.jsx(c.Z,{onInstall:()=>f(!1),onDismiss:()=>f(!1)}),s&&r.jsx(l.Z,{}),i.isUpdateAvailable&&(0,r.jsxs)("div",{className:"fixed bottom-4 right-4 z-50 bg-blue-100 dark:bg-blue-900/50 border border-blue-200 dark:border-blue-800 rounded-lg shadow-lg p-4 max-w-sm",children:[r.jsx("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1 mr-3",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Update Available"}),r.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"A new version of the app is available"})]})}),(0,r.jsxs)("div",{className:"flex gap-2 mt-3",children:[r.jsx("button",{onClick:g,className:"flex-1 text-xs px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Update Now"}),r.jsx("button",{onClick:()=>u(e=>({...e,isUpdateAvailable:!1})),className:"text-xs px-3 py-1 border border-blue-300 text-blue-700 rounded hover:bg-blue-50 transition-colors",children:"Later"})]})]})]})}function h(){let e=(0,n.useContext)(d);if(!e)throw Error("usePWA must be used within a PWAProvider");return e}},31733:(e,t,s)=>{"use strict";s.d(t,{x:()=>n});class r{constructor(){this.state={isSupported:!1,isRegistered:!1,isUpdateAvailable:!1,isOffline:!1,registration:null},this.listeners=[],this.handleMessage=e=>{let{type:t,payload:s}=e.data;switch(t){case"CACHE_UPDATE":console.log("Cache updated:",s);break;case"SYNC_BACKGROUND":console.log("Background sync completed:",s);break;default:console.log("Unknown message from service worker:",e.data)}},this.handleOnline=()=>{this.state.isOffline=!1,this.notifyListeners(),console.log("App is back online")},this.handleOffline=()=>{this.state.isOffline=!0,this.notifyListeners(),console.log("App is offline")},this.state.isSupported="serviceWorker"in navigator,this.state.isOffline=!navigator.onLine}async register(){if(!this.state.isSupported)return console.warn("Service workers are not supported in this browser"),null;try{let e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return this.state.registration=e,this.state.isRegistered=!0,e.addEventListener("updatefound",()=>{let t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(this.state.isUpdateAvailable=!0,this.notifyListeners())})}),navigator.serviceWorker.addEventListener("message",this.handleMessage),this.notifyListeners(),console.log("Service worker registered successfully"),e}catch(e){return console.error("Service worker registration failed:",e),null}}async update(){this.state.registration&&await this.state.registration.update()}async skipWaiting(){this.state.registration?.waiting&&(this.sendMessage({type:"SKIP_WAITING"}),this.state.isUpdateAvailable=!1,this.notifyListeners())}sendMessage(e){this.state.registration?.active&&this.state.registration.active.postMessage(e)}subscribe(e){return this.listeners.push(e),()=>{let t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}getState(){return{...this.state}}canInstall(){return this.state.isSupported&&this.state.isRegistered}async requestNotificationPermission(){if(!("Notification"in window))return"denied";if("default"===Notification.permission){let e=await Notification.requestPermission();return this.sendMessage({type:"NOTIFICATION_PERMISSION",payload:{permission:e}}),e}return Notification.permission}async showNotification(e,t){this.state.registration&&"granted"===Notification.permission&&await this.state.registration.showNotification(e,{icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",tag:"cc-task-manager",renotify:!0,...t})}notifyListeners(){this.listeners.forEach(e=>e(this.state))}destroy(){navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",this.handleMessage),this.listeners=[]}}let n=new r},15659:(e,t,s)=>{"use strict";s.d(t,{ThemeProvider:()=>c});var r=s(56567),n=s(1861);let o={theme:"system",accessibility:"default",fontSize:"medium",reducedMotion:!1,highContrast:!1};function i(e){return"system"===e?"light":e}let a=(0,n.createContext)(void 0);function c({children:e,defaultTheme:t="system",storageKey:s="cc-task-manager-theme-preferences",enableTransitions:c=!0}){let[l,d]=(0,n.useState)(()=>({...o,theme:t})),[u,h]=(0,n.useState)("light"),[m,p]=(0,n.useState)(!1),f=(0,n.useCallback)(e=>{d(t=>({...t,theme:e})),h(i(e))},[]),g=(0,n.useCallback)(()=>{f("light"===u?"dark":"light")},[u,f]),b=(0,n.useCallback)(e=>{d(t=>({...t,accessibility:e,highContrast:"high-contrast"===e,reducedMotion:"reduced-motion"===e}))},[]),y=(0,n.useCallback)(e=>{d(t=>({...t,fontSize:e}))},[]),k=(0,n.useCallback)(e=>{d(t=>({...t,reducedMotion:e}))},[]),v=(0,n.useCallback)(e=>{d(t=>({...t,highContrast:e}))},[]),w=(0,n.useCallback)(()=>{d(o),h(i(o.theme))},[]),S={theme:l.theme,resolvedTheme:u,preferences:l,setTheme:f,toggleTheme:g,setAccessibility:b,setFontSize:y,setReducedMotion:k,setHighContrast:v,resetToDefaults:w,isDark:"dark"===u,isHighContrast:l.highContrast};return r.jsx(a.Provider,{value:S,children:e})}},34777:(e,t,s)=>{"use strict";s.d(t,{cn:()=>o});var r=s(11445),n=s(74487);function o(...e){return(0,n.m6)((0,r.W)(e))}},28683:(e,t,s)=>{"use strict";s.d(t,{k:()=>c});var r=s(69021),n=s(36370),o=s(61417),i=s(65476);class a{constructor(e={}){this.socket=null,this.eventListeners=new Map,this.roomSubscriptions=new Map,this.reconnectTimer=null,this.authRetryTimer=null,this.config={url:process.env.NEXT_PUBLIC_WEBSOCKET_URL||"ws://localhost:3001",autoReconnect:!0,reconnectInterval:1e3,maxReconnectAttempts:5,timeout:1e4,enableDebugLogs:!1,...e},this.connectionState={isConnected:!1,isConnecting:!1,isAuthenticated:!1,reconnectAttempts:0,lastConnectedAt:null,lastDisconnectedAt:null,error:null},this.log("WebSocket client initialized with config:",this.config)}async connect(){if(this.connectionState.isConnected||this.connectionState.isConnecting){this.log("Already connected or connecting");return}this.connectionState.isConnecting=!0,this.connectionState.error=null;try{this.log("Connecting to WebSocket server:",this.config.url),this.socket=(0,r.io)(this.config.url,{timeout:this.config.timeout,transports:["websocket","polling"],autoConnect:!1}),this.setupEventListeners(),await new Promise((e,t)=>{let s=setTimeout(()=>{t(Error("Connection timeout"))},this.config.timeout);this.socket.once("connect",()=>{clearTimeout(s),e()}),this.socket.once("connect_error",e=>{clearTimeout(s),t(e)}),this.socket.connect()}),this.connectionState.isConnected=!0,this.connectionState.isConnecting=!1,this.connectionState.lastConnectedAt=new Date,this.connectionState.reconnectAttempts=0,this.log("Connected to WebSocket server");let e=o.q.getToken();e&&!o.l.isTokenExpired(e)&&await this.authenticate(e)}catch(e){throw this.connectionState.isConnecting=!1,this.connectionState.error=e instanceof Error?e.message:"Connection failed",this.log("Connection failed:",e),this.config.autoReconnect&&this.scheduleReconnect(),e}}disconnect(){this.log("Disconnecting from WebSocket server"),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.authRetryTimer&&(clearTimeout(this.authRetryTimer),this.authRetryTimer=null),this.socket&&(this.socket.disconnect(),this.socket=null),this.connectionState.isConnected=!1,this.connectionState.isConnecting=!1,this.connectionState.isAuthenticated=!1,this.connectionState.lastDisconnectedAt=new Date,this.connectionState.reconnectAttempts=0,this.roomSubscriptions.clear()}async authenticate(e){if(!this.socket||!this.connectionState.isConnected)throw Error("Not connected to WebSocket server");if(o.l.isTokenExpired(e))throw Error("Token is expired");return this.log("Authenticating with server"),new Promise((t,s)=>{let r=setTimeout(()=>{s(Error("Authentication timeout"))},this.config.timeout);this.socket.once("auth:success",e=>{clearTimeout(r),this.connectionState.isAuthenticated=!0,this.connectionState.error=null,this.log("Authentication successful:",e),t()}),this.socket.once("auth:error",e=>{clearTimeout(r),this.connectionState.isAuthenticated=!1,this.connectionState.error=e.message||"Authentication failed",this.log("Authentication failed:",e),s(Error(e.message||"Authentication failed"))}),this.socket.emit("authenticate",{token:e})})}isConnected(){return this.connectionState.isConnected}isAuthenticated(){return this.connectionState.isAuthenticated}getConnectionState(){return{...this.connectionState}}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(t),this.log(`Event listener registered for: ${e}`)}off(e,t){let s=this.eventListeners.get(e);s&&(s.delete(t),0===s.size&&this.eventListeners.delete(e),this.log(`Event listener removed for: ${e}`))}emit(e,t){let s=this.eventListeners.get(e);s&&s.forEach(s=>{try{s(t)}catch(t){this.log(`Error in event listener for ${e}:`,t)}})}async joinRoom(e){if(!this.socket||!this.connectionState.isAuthenticated)throw Error("Not connected or authenticated");return new Promise((t,s)=>{let r=setTimeout(()=>{s(Error(`Failed to join room: ${e}`))},this.config.timeout);this.socket.once("room:joined",s=>{s.room===e&&(clearTimeout(r),this.roomSubscriptions.has(e)?this.roomSubscriptions.get(e).isSubscribed=!0:this.roomSubscriptions.set(e,{room:e,subscriptions:new Set,isSubscribed:!0}),this.log(`Joined room: ${e}, members: ${s.members}`),t())}),this.socket.once("room:error",t=>{clearTimeout(r),this.log(`Failed to join room ${e}:`,t),s(Error(t.message||`Failed to join room: ${e}`))}),this.socket.emit("join:room",{room:e})})}async leaveRoom(e){if(!this.socket)throw Error("Not connected");return new Promise((t,s)=>{let r=setTimeout(()=>{s(Error(`Failed to leave room: ${e}`))},this.config.timeout);this.socket.once("room:left",s=>{if(s.room===e){clearTimeout(r);let s=this.roomSubscriptions.get(e);s&&(s.isSubscribed=!1),this.log(`Left room: ${e}`),t()}}),this.socket.emit("leave:room",{room:e})})}subscribeToRoom(e,t,s){this.roomSubscriptions.has(e)||this.roomSubscriptions.set(e,{room:e,subscriptions:new Set,isSubscribed:!1}),this.roomSubscriptions.get(e).subscriptions.add(s),this.on(t,s),this.log(`Subscribed to ${t} in room: ${e}`)}unsubscribeFromRoom(e,t,s){let r=this.roomSubscriptions.get(e);r&&(r.subscriptions.delete(s),this.off(t,s),this.log(`Unsubscribed from ${t} in room: ${e}`))}getRoomSubscriptions(){let e={};return this.roomSubscriptions.forEach((t,s)=>{e[s]={...t}}),e}setupEventListeners(){this.socket&&(this.socket.on("connect",()=>{this.log("Socket connected"),this.connectionState.isConnected=!0,this.connectionState.isConnecting=!1,this.connectionState.lastConnectedAt=new Date,this.connectionState.reconnectAttempts=0}),this.socket.on("disconnect",e=>{this.log("Socket disconnected:",e),this.connectionState.isConnected=!1,this.connectionState.isAuthenticated=!1,this.connectionState.lastDisconnectedAt=new Date,"io server disconnect"===e?this.connectionState.error="Server disconnected":this.config.autoReconnect&&this.scheduleReconnect()}),this.socket.on("connect_error",e=>{this.log("Connection error:",e),this.connectionState.error=e.message,this.config.autoReconnect&&this.scheduleReconnect()}),this.socket.onAny((e,t)=>{try{let s={event:e,timestamp:new Date().toISOString(),...t},r=i.k6.parse(s);this.emit(r.event,r)}catch(t){t instanceof n.jm?this.log(`Invalid event format for ${e}:`,t.errors):this.log(`Error processing event ${e}:`,t)}}))}scheduleReconnect(){if(this.connectionState.reconnectAttempts>=this.config.maxReconnectAttempts){this.log("Max reconnection attempts reached"),this.connectionState.error="Max reconnection attempts reached";return}let e=Math.min(this.config.reconnectInterval*Math.pow(2,this.connectionState.reconnectAttempts),3e4);this.connectionState.reconnectAttempts++,this.log(`Scheduling reconnection attempt ${this.connectionState.reconnectAttempts} in ${e}ms`),this.reconnectTimer=setTimeout(()=>{this.log(`Reconnection attempt ${this.connectionState.reconnectAttempts}`),this.connect().catch(e=>{this.log("Reconnection failed:",e)})},e)}log(e,...t){this.config.enableDebugLogs&&console.log(`[WebSocket] ${e}`,...t)}}let c=new a},71956:(e,t,s)=>{"use strict";s.d(t,{WebSocketProvider:()=>c});var r=s(56567),n=s(1861),o=s(28683),i=s(88356);let a=(0,n.createContext)(void 0);function c({children:e,client:t=o.k,autoConnect:s=!0,room:c}){let l=(0,i.h5)(c,t);(0,n.useRef)(!1);let d={client:t,isConnected:l.isConnected,isAuthenticated:l.isAuthenticated,isConnecting:l.isConnecting,error:l.error,connect:l.connect,disconnect:l.disconnect,authenticate:l.authenticate,isAuthenticating:l.isAuthenticating,authError:l.authError};return r.jsx(a.Provider,{value:d,children:e})}},88356:(e,t,s)=>{"use strict";s.d(t,{AV:()=>a,h5:()=>c,uE:()=>i});var r=s(1861),n=s(28683),o=s(61417);function i(e,t,s=n.k,o=[]){(0,r.useRef)(t).current=t}function a(e=n.k){let[t,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(null);return i("system:status",(0,r.useCallback)(e=>{s(e.data),a(new Date)},[]),e),{systemStatus:t,lastUpdate:o,activeTasks:t?.activeTasks??0,queueLength:t?.queueLength??0,workerStatus:t?.workerStatus??"unavailable",uptime:t?.uptime??0}}function c(e,t=n.k){let s=function(e=n.k){let[t,s]=(0,r.useState)(e.getConnectionState());return{connectionState:t,connect:(0,r.useCallback)(async()=>{try{await e.connect()}catch(e){console.error("Failed to connect to WebSocket:",e)}},[e]),disconnect:(0,r.useCallback)(()=>{e.disconnect()},[e]),isConnected:t.isConnected,isAuthenticated:t.isAuthenticated,isConnecting:t.isConnecting,error:t.error}}(t),i=function(e=n.k){let[t,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(null);return{authenticate:(0,r.useCallback)(async()=>{let t=o.q.getToken();if(!t)return a("No authentication token available"),!1;s(!0),a(null);try{return await e.authenticate(t),!0}catch(e){return a(e instanceof Error?e.message:"Authentication failed"),!1}finally{s(!1)}},[e]),isAuthenticating:t,authError:i}}(t),c=e?function(e,t=n.k){let[s,o]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[c,l]=(0,r.useState)(null),d=(0,r.useCallback)(async()=>{if(!s&&!i){a(!0),l(null);try{await t.joinRoom(e),o(!0)}catch(e){l(e instanceof Error?e.message:"Failed to join room")}finally{a(!1)}}},[t,e,s,i]),u=(0,r.useCallback)(async()=>{if(s)try{await t.leaveRoom(e),o(!1)}catch(e){l(e instanceof Error?e.message:"Failed to leave room")}},[t,e,s]);return{isSubscribed:s,isJoining:i,error:c,joinRoom:d,leaveRoom:u,subscribeToEvent:(0,r.useCallback)((s,r)=>{t.subscribeToRoom(e,s,r)},[t,e]),unsubscribeFromEvent:(0,r.useCallback)((s,r)=>{t.unsubscribeFromRoom(e,s,r)},[t,e])}}(e,t):null,l=a(t);return{...s,...i,room:c?{...c,room:e}:null,systemStatus:l.systemStatus,systemLastUpdate:l.lastUpdate}}},65476:(e,t,s)=>{"use strict";s.d(t,{k6:()=>y});var r=s(70866),n=s(49527);let o=r.Ry({event:r.Z_(),timestamp:r.Z_().datetime(),id:r.Z_().uuid().optional()}),i=o.extend({event:r.i0("task:update"),data:n.TaskStatusSchema}),a=o.extend({event:r.i0("task:created"),data:r.Ry({taskId:r.Z_(),sessionName:r.Z_(),userId:r.Z_(),createdAt:r.Z_().datetime()})}),c=o.extend({event:r.i0("task:completed"),data:r.Ry({taskId:r.Z_(),result:r.Z_().optional(),duration:r.Rx(),exitCode:r.Rx()})}),l=o.extend({event:r.i0("task:error"),data:r.Ry({taskId:r.Z_(),error:r.Z_(),stackTrace:r.Z_().optional()})}),d=o.extend({event:r.i0("system:status"),data:r.Ry({activeTasks:r.Rx(),queueLength:r.Rx(),workerStatus:r.Km(["healthy","degraded","unavailable"]),uptime:r.Rx()})}),u=o.extend({event:r.i0("user:connected"),data:r.Ry({userId:r.Z_(),sessionId:r.Z_(),connectedAt:r.Z_().datetime()})}),h=o.extend({event:r.i0("user:disconnected"),data:r.Ry({userId:r.Z_(),sessionId:r.Z_(),disconnectedAt:r.Z_().datetime(),reason:r.Z_().optional()})}),m=o.extend({event:r.i0("auth:required"),data:r.Ry({message:r.Z_(),retryAfter:r.Rx().optional()})}),p=o.extend({event:r.i0("auth:success"),data:r.Ry({userId:r.Z_(),sessionId:r.Z_(),permissions:r.IX(r.Z_())})}),f=o.extend({event:r.i0("auth:error"),data:r.Ry({message:r.Z_(),code:r.Z_()})}),g=o.extend({event:r.i0("room:joined"),data:r.Ry({room:r.Z_(),members:r.Rx()})}),b=o.extend({event:r.i0("room:left"),data:r.Ry({room:r.Z_(),reason:r.Z_().optional()})}),y=r.VK("event",[i,a,c,l,d,u,h,m,p,f,g,b])},49527:(e,t,s)=>{"use strict";var r=Object.create?function(e,t,s,r){void 0===r&&(r=s);var n=Object.getOwnPropertyDescriptor(t,s);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,n)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]};Object.defineProperty(t,"__esModule",{value:!0}),t.workerConfig=void 0,function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)}(s(33834),t);var n=s(84979);Object.defineProperty(t,"workerConfig",{enumerable:!0,get:function(){return n.default}})},84979:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(56483),n=s(33834);t.default=(0,r.registerAs)("worker",()=>{let e={maxConcurrentTasks:parseInt(process.env.WORKER_MAX_CONCURRENT_TASKS||"5"),processTimeoutMs:parseInt(process.env.WORKER_PROCESS_TIMEOUT_MS||"600000"),gracefulShutdownMs:parseInt(process.env.WORKER_GRACEFUL_SHUTDOWN_MS||"5000"),pidCheckIntervalMs:parseInt(process.env.WORKER_PID_CHECK_INTERVAL_MS||"1000"),fileWatchTimeoutMs:parseInt(process.env.WORKER_FILE_WATCH_TIMEOUT_MS||"30000"),inactivityTimeoutMs:parseInt(process.env.WORKER_INACTIVITY_TIMEOUT_MS||"120000"),pythonExecutable:process.env.PYTHON_EXECUTABLE||"python3",wrapperScriptPath:process.env.PYTHON_WRAPPER_SCRIPT_PATH||"./scripts/claude_wrapper.py",wrapperWorkingDir:process.env.PYTHON_WRAPPER_WORKING_DIR,queueName:process.env.BULLMQ_QUEUE_NAME||"claude-code-tasks",redisHost:process.env.REDIS_HOST||"localhost",redisPort:parseInt(process.env.REDIS_PORT||"6379"),redisPassword:process.env.REDIS_PASSWORD,logLevel:process.env.LOG_LEVEL||"info",enableDetailedLogs:"true"===process.env.ENABLE_DETAILED_LOGS,sessionLogsDir:process.env.SESSION_LOGS_DIR,awaitWriteFinish:"false"!==process.env.AWAIT_WRITE_FINISH,awaitWriteFinishMs:parseInt(process.env.AWAIT_WRITE_FINISH_MS||"100")};return n.WorkerConfigSchema.parse(e)})},33834:(e,t,s)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.validateTaskStatus=t.validateWorkerConfig=t.validateClaudeCodeOptions=t.validateTaskExecutionRequest=t.validateProcessConfig=t.TaskStatusSchema=t.WorkerConfigSchema=t.TaskExecutionRequestSchema=t.ClaudeCodeOptionsSchema=t.ProcessConfigSchema=t.TaskState=void 0;let n=s(15432);(function(e){e.PENDING="pending",e.RUNNING="running",e.ACTIVE="active",e.IDLE="idle",e.COMPLETED="completed",e.FAILED="failed",e.CANCELLED="cancelled"})(r||(t.TaskState=r={})),t.ProcessConfigSchema=n.z.object({jobId:n.z.string().min(1,"Job ID is required"),sessionName:n.z.string().min(1,"Session name is required"),workingDirectory:n.z.string().min(1,"Working directory is required"),pythonExecutable:n.z.string().optional().default("python3"),wrapperScriptPath:n.z.string().min(1,"Wrapper script path is required"),unbuffered:n.z.boolean().default(!0)}),t.ClaudeCodeOptionsSchema=n.z.object({model:n.z.string().optional(),maxTokens:n.z.number().positive().optional(),temperature:n.z.number().min(0).max(2).optional(),timeout:n.z.number().positive().optional().default(3e5),permission_mode:n.z.enum(["bypassPermissions","default","plan","acceptEdits"]).optional()}),t.TaskExecutionRequestSchema=n.z.object({id:n.z.string().min(1,"Task ID is required"),prompt:n.z.string().min(1,"Prompt is required"),sessionName:n.z.string().min(1,"Session name is required"),workingDirectory:n.z.string().min(1,"Working directory is required"),options:t.ClaudeCodeOptionsSchema,timeoutMs:n.z.number().positive().optional().default(3e5)}),t.WorkerConfigSchema=n.z.object({maxConcurrentTasks:n.z.number().positive().default(5),processTimeoutMs:n.z.number().positive().default(6e5),gracefulShutdownMs:n.z.number().positive().default(5e3),pidCheckIntervalMs:n.z.number().positive().default(1e3),fileWatchTimeoutMs:n.z.number().positive().default(3e4),inactivityTimeoutMs:n.z.number().positive().default(12e4),pythonExecutable:n.z.string().default("python3"),wrapperScriptPath:n.z.string().min(1,"Wrapper script path is required"),wrapperWorkingDir:n.z.string().optional(),queueName:n.z.string().default("claude-code-tasks"),redisHost:n.z.string().default("localhost"),redisPort:n.z.number().positive().default(6379),redisPassword:n.z.string().optional(),logLevel:n.z.enum(["fatal","error","warn","info","debug","trace"]).default("info"),enableDetailedLogs:n.z.boolean().default(!1),sessionLogsDir:n.z.string().optional(),awaitWriteFinish:n.z.boolean().default(!0),awaitWriteFinishMs:n.z.number().positive().default(100)}),t.TaskStatusSchema=n.z.object({taskId:n.z.string(),state:n.z.nativeEnum(r),pid:n.z.number().optional(),progress:n.z.string().optional(),lastActivity:n.z.date(),error:n.z.string().optional(),exitCode:n.z.number().optional()}),t.validateProcessConfig=e=>t.ProcessConfigSchema.parse(e),t.validateTaskExecutionRequest=e=>t.TaskExecutionRequestSchema.parse(e),t.validateClaudeCodeOptions=e=>t.ClaudeCodeOptionsSchema.parse(e),t.validateWorkerConfig=e=>t.WorkerConfigSchema.parse(e),t.validateTaskStatus=e=>t.TaskStatusSchema.parse(e)},21550:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C,metadata:()=>T});var r={};s.r(r),s.d(r,{JZ:()=>p});var n=s(49865),o=s(22365),i=s.n(o);s(35160);var a=s(73051);let c=(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/theme/context.tsx#ThemeProvider`);(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/theme/context.tsx#useTheme`);let l=(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/auth/context.tsx#AuthProvider`);(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/auth/context.tsx#useAuth`);let d=(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/websocket/context.tsx#WebSocketProvider`);(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/websocket/context.tsx#useWebSocketContext`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/websocket/context.tsx#useWebSocketClient`);let u=(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/api/providers.tsx#ReactQueryProvider`);var h=s(18713),m=s.n(h);(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/focus-management.ts#useFocusTrap`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/focus-management.ts#useFocusRestore`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/focus-management.ts#createSkipLink`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/focus-management.ts#announceToScreenReader`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/keyboard-navigation.ts#Keys`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/keyboard-navigation.ts#useArrowNavigation`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/keyboard-navigation.ts#useEscapeKey`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/keyboard-navigation.ts#useActivationKeys`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/keyboard-navigation.ts#useRovingTabIndex`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/keyboard-navigation.ts#keyboardUtils`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/screen-reader.tsx#screenReader`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/screen-reader.tsx#useScreenReaderAnnouncement`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/screen-reader.tsx#useDynamicAnnouncement`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/screen-reader.tsx#statusAnnouncements`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/screen-reader.tsx#createStatusMessage`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/screen-reader.tsx#LiveRegion`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/performance-hooks.ts#useOptimizedImage`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/performance-hooks.ts#useOptimizedSearch`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/performance-hooks.ts#useOptimizedScroll`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/performance-hooks.ts#usePerformanceOptimization`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/performance-hooks.ts#useAdaptiveLoading`);let p=(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/performance-hooks.ts#useReducedMotion`);(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/accessibility/performance-hooks.ts#useBatteryOptimization`),(0,h.forwardRef)(({href:e,children:t,className:s="",...r},o)=>n.jsx("a",{ref:o,href:e,className:`skip-link ${s}`,...r,children:t})).displayName="SkipLink",(0,h.forwardRef)(({variant:e="primary",size:t="md",isLoading:s=!1,children:r,className:o="",...i},a)=>(0,n.jsxs)("button",{ref:a,className:`btn-accessible ${{primary:"btn-primary-accessible",secondary:"btn-secondary-accessible",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90"}[e]} ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[t]} ${o}`,disabled:s||i.disabled,"aria-disabled":s||i.disabled,...i,children:[s&&n.jsx("span",{className:"animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2","aria-hidden":"true"}),n.jsx("span",{className:s?"sr-only":"",children:r}),s&&n.jsx("span",{"aria-live":"polite",children:"Loading..."})]})).displayName="Button";let f=({children:e,enableDevMode:t=!1})=>{(0,r.useRenderPerformance)("App");let{getAllMetrics:s}=(0,r.useWebVitals)(e=>{t&&console.log(`Performance metric: ${e.name} = ${e.value}ms (${e.rating})`)}),{prefersReducedMotion:o}=p();return m().useEffect(()=>{o?(document.documentElement.style.setProperty("--animation-duration","0s"),document.documentElement.style.setProperty("--transition-duration","0s")):(document.documentElement.style.removeProperty("--animation-duration"),document.documentElement.style.removeProperty("--transition-duration"))},[o]),n.jsx(n.Fragment,{children:e})};class g{constructor(){this.state={isSupported:!1,isRegistered:!1,isUpdateAvailable:!1,isOffline:!1,registration:null},this.listeners=[],this.handleMessage=e=>{let{type:t,payload:s}=e.data;switch(t){case"CACHE_UPDATE":console.log("Cache updated:",s);break;case"SYNC_BACKGROUND":console.log("Background sync completed:",s);break;default:console.log("Unknown message from service worker:",e.data)}},this.handleOnline=()=>{this.state.isOffline=!1,this.notifyListeners(),console.log("App is back online")},this.handleOffline=()=>{this.state.isOffline=!0,this.notifyListeners(),console.log("App is offline")},this.state.isSupported="serviceWorker"in navigator,this.state.isOffline=!navigator.onLine}async register(){if(!this.state.isSupported)return console.warn("Service workers are not supported in this browser"),null;try{let e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return this.state.registration=e,this.state.isRegistered=!0,e.addEventListener("updatefound",()=>{let t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(this.state.isUpdateAvailable=!0,this.notifyListeners())})}),navigator.serviceWorker.addEventListener("message",this.handleMessage),this.notifyListeners(),console.log("Service worker registered successfully"),e}catch(e){return console.error("Service worker registration failed:",e),null}}async update(){this.state.registration&&await this.state.registration.update()}async skipWaiting(){this.state.registration?.waiting&&(this.sendMessage({type:"SKIP_WAITING"}),this.state.isUpdateAvailable=!1,this.notifyListeners())}sendMessage(e){this.state.registration?.active&&this.state.registration.active.postMessage(e)}subscribe(e){return this.listeners.push(e),()=>{let t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}getState(){return{...this.state}}canInstall(){return this.state.isSupported&&this.state.isRegistered}async requestNotificationPermission(){if(!("Notification"in window))return"denied";if("default"===Notification.permission){let e=await Notification.requestPermission();return this.sendMessage({type:"NOTIFICATION_PERMISSION",payload:{permission:e}}),e}return Notification.permission}async showNotification(e,t){this.state.registration&&"granted"===Notification.permission&&await this.state.registration.showNotification(e,{icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",tag:"cc-task-manager",renotify:!0,...t})}notifyListeners(){this.listeners.forEach(e=>e(this.state))}destroy(){navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",this.handleMessage),this.listeners=[]}}new g;class b{constructor(){this.queue=new Map,this.storageKey="cc-task-manager-sync-queue",this.defaultOptions={maxRetries:3,retryDelay:5e3,queueName:"background-sync"},this.isSupported="serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype,this.loadQueue()}async register(e,t={}){let s={...this.defaultOptions,...t},r=this.generateId(),n={id:r,timestamp:Date.now(),retryCount:0,maxRetries:s.maxRetries,...e};if(this.queue.set(r,n),this.saveQueue(),this.isSupported)try{let e=await navigator.serviceWorker.ready;await e.sync.register(s.queueName),console.log("Background sync registered:",r)}catch(e){console.error("Failed to register background sync:",e),this.processItem(n)}else this.processItem(n);return r}async processItem(e){try{if(await this.executeSync(e))return this.queue.delete(e.id),this.saveQueue(),console.log("Sync item processed successfully:",e.id),!0;return e.retryCount++,e.retryCount>=e.maxRetries?(console.error("Sync item exceeded max retries, removing:",e.id),this.queue.delete(e.id),this.saveQueue()):(console.log(`Sync item failed, will retry (${e.retryCount}/${e.maxRetries}):`,e.id),this.saveQueue(),setTimeout(()=>this.processItem(e),this.defaultOptions.retryDelay)),!1}catch(e){return console.error("Error processing sync item:",e),!1}}async processQueue(){console.log(`Processing sync queue with ${this.queue.size} items`);let e=Array.from(this.queue.values()).map(e=>this.processItem(e));await Promise.all(e)}async executeSync(e){let t=process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001";try{let s;switch(e.type){case"task_create":s=await fetch(`${t}/api/tasks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;case"task_update":s=await fetch(`${t}/api/tasks/${e.data.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;case"task_delete":s=await fetch(`${t}/api/tasks/${e.data.id}`,{method:"DELETE"});break;case"user_action":s=await fetch(`${t}/api/actions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;default:return console.error("Unknown sync type:",e.type),!1}return s.ok}catch(e){return console.error("Sync execution failed:",e),!1}}getQueueStatus(){return{size:this.queue.size,items:Array.from(this.queue.values()),isSupported:this.isSupported}}clearQueue(){this.queue.clear(),this.saveQueue()}removeItem(e){let t=this.queue.delete(e);return t&&this.saveQueue(),t}loadQueue(){try{let e=localStorage.getItem(this.storageKey);if(e){let t=JSON.parse(e);this.queue=new Map(t.map(e=>[e.id,e]))}}catch(e){console.error("Failed to load sync queue:",e),this.queue=new Map}}saveQueue(){try{let e=Array.from(this.queue.values());localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.error("Failed to save sync queue:",e)}}generateId(){return`sync_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}new b;let y=(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/pwa/pwa-provider.tsx#PWAProvider`);(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/pwa/pwa-provider.tsx#usePWA`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/pwa/pwa-provider.tsx#default`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/pwa/install-prompt.tsx#InstallPrompt`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/pwa/install-prompt.tsx#default`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/pwa/offline-indicator.tsx#OfflineIndicator`),(0,a.createProxy)(String.raw`/home/rmondo/repos/cc-task-manager/worktree/dashboard-frontend/apps/frontend/src/lib/pwa/offline-indicator.tsx#default`);var k=s(66995),v=s(98934);function w(...e){return(0,v.m6)((0,k.W)(e))}let S=(0,h.forwardRef)(({href:e,className:t,children:s="Skip to main content",...r},o)=>n.jsx("a",{ref:o,href:e,className:w("absolute left-[-9999px] top-auto w-[1px] h-[1px] overflow-hidden","focus:left-[6px] focus:top-[6px] focus:w-auto focus:h-auto focus:overflow-visible","focus:z-[9999] focus:bg-primary focus:text-primary-foreground","focus:px-3 focus:py-2 focus:rounded-md focus:text-sm focus:font-medium","focus:shadow-lg focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","transition-all duration-150 ease-in-out","no-underline hover:no-underline focus:no-underline",t),tabIndex:0,...r,children:s}));S.displayName="SkipNav";let x=({children:e,className:t})=>n.jsx("div",{className:w("sr-only focus-within:not-sr-only focus-within:absolute focus-within:top-0 focus-within:left-0 focus-within:z-[9999]","focus-within:flex focus-within:gap-2 focus-within:p-2",t),role:"navigation","aria-label":"Skip navigation",children:e}),R={Complete:()=>(0,n.jsxs)(x,{children:[n.jsx(S,{href:"#main-content",children:"Skip to main content"}),n.jsx(S,{href:"#navigation",children:"Skip to navigation"}),n.jsx(S,{href:"#search",children:"Skip to search"}),n.jsx(S,{href:"#footer",children:"Skip to footer"})]})},T={title:"CC Task Manager",description:"Contract-driven task management system with real-time updates",viewport:"width=device-width, initial-scale=1",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"CC Tasks"},other:{"color-scheme":"light dark","mobile-web-app-capable":"yes","apple-mobile-web-app-capable":"yes","apple-mobile-web-app-status-bar-style":"default","apple-mobile-web-app-title":"CC Tasks","application-name":"CC Task Manager","msapplication-TileColor":"#3b82f6","msapplication-config":"/browserconfig.xml"}};function C({children:e}){return(0,n.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,n.jsxs)("head",{children:[n.jsx("meta",{name:"theme-color",content:"#ffffff",media:"(prefers-color-scheme: light)"}),n.jsx("meta",{name:"theme-color",content:"#000000",media:"(prefers-color-scheme: dark)"})]}),(0,n.jsxs)("body",{className:i().className,children:[n.jsx(R.Complete,{}),n.jsx(y,{children:n.jsx(c,{children:n.jsx(u,{children:n.jsx(l,{children:n.jsx(d,{children:n.jsx(f,{children:e})})})})})})]})]})}},35160:()=>{}};