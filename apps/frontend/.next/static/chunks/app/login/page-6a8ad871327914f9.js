(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{37616:function(e,s,r){Promise.resolve().then(r.bind(r,50452))},50452:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return S}});var a=r(70442),t=r(26449),l=r(37387),i=r(63103);i.Ry({sub:i.Z_(),email:i.Z_().email(),role:i.Km(["admin","user","viewer"]),permissions:i.IX(i.Z_()),iat:i.Rx(),exp:i.Rx()});let n=i.Ry({id:i.Z_(),email:i.Z_().email(),role:i.Km(["admin","user","viewer"]),permissions:i.IX(i.Z_())});i.Ry({email:i.Z_().email("Invalid email format"),password:i.Z_().min(1,"Password is required")}),i.Ry({token:i.Z_(),user:n,expiresIn:i.Rx()}),r(94057),r(68338);var d=r(4934);let c=e=>{let{children:s,fallback:r=null}=e,{isAuthenticated:t}=(0,d.a)();return t?(0,a.jsx)(a.Fragment,{children:r}):(0,a.jsx)(a.Fragment,{children:s})};r(35148);var o=r(29225),m=r(38194),x=r(77098),u=r(30719),h=r(96310),g=r(59873),p=r(72237);let f=(0,g.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)(h.f,{ref:s,className:(0,p.cn)(f(),r),...t})});v.displayName=h.f.displayName;var j=r(23797);let b=(0,g.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-orange-500/50 text-orange-700 dark:border-orange-500 [&>svg]:text-orange-700 bg-orange-50 dark:bg-orange-950/20",success:"border-green-500/50 text-green-700 dark:border-green-500 [&>svg]:text-green-700 bg-green-50 dark:bg-green-950/20"}},defaultVariants:{variant:"default"}}),N=t.forwardRef((e,s)=>{let{className:r,variant:t,...l}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,p.cn)(b({variant:t}),r),...l})});N.displayName="Alert",t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("h5",{ref:s,className:(0,p.cn)("mb-1 font-medium leading-none tracking-tight",r),...t})}).displayName="AlertTitle";let w=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,p.cn)("text-sm [&_p]:leading-relaxed",r),...t})});w.displayName="AlertDescription";var y=r(21581),_=r(74813),k=r(37271);let Z=i.Ry({email:i.Z_().min(1,"Email is required").email("Please enter a valid email address"),password:i.Z_().min(1,"Password is required").min(6,"Password must be at least 6 characters")}),R=e=>{let{onSuccess:s,onError:r,className:l="",showCard:i=!0,redirectUrl:n}=e,{login:c,isLoading:h,error:g}=(0,d.a)(),[p,f]=(0,t.useState)(!1),{register:b,handleSubmit:R,formState:{errors:S,isSubmitting:E},reset:I}=(0,o.cI)({resolver:(0,m.F)(Z),defaultValues:{email:"",password:""}}),P=async e=>{try{await c(e),I(),null==s||s(),n&&(window.location.href=n)}catch(s){let e=s instanceof Error?s.message:"Login failed";null==r||r(e)}},F=(0,a.jsxs)("form",{onSubmit:R(P),className:"space-y-4",children:[g&&(0,a.jsx)(N,{variant:"destructive",children:(0,a.jsx)(w,{children:g})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v,{htmlFor:"email",children:"Email"}),(0,a.jsx)(u.I,{id:"email",type:"email",placeholder:"Enter your email",...b("email"),disabled:h||E,"aria-invalid":!!S.email,"aria-describedby":S.email?"email-error":void 0}),S.email&&(0,a.jsx)("p",{id:"email-error",className:"text-sm text-red-600",children:S.email.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v,{htmlFor:"password",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.I,{id:"password",type:p?"text":"password",placeholder:"Enter your password",...b("password"),disabled:h||E,"aria-invalid":!!S.password,"aria-describedby":S.password?"password-error":void 0,className:"pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>{f(!p)},className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600","aria-label":p?"Hide password":"Show password",children:p?(0,a.jsx)(y.Z,{className:"h-4 w-4"}):(0,a.jsx)(_.Z,{className:"h-4 w-4"})})]}),S.password&&(0,a.jsx)("p",{id:"password-error",className:"text-sm text-red-600",children:S.password.message})]}),(0,a.jsx)(x.z,{type:"submit",className:"w-full",disabled:h||E,children:h||E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]});return i?(0,a.jsxs)(j.Zb,{className:l,children:[(0,a.jsxs)(j.Ol,{className:"text-center",children:[(0,a.jsx)(j.ll,{children:"Welcome Back"}),(0,a.jsx)(j.SZ,{children:"Sign in to your account to access the dashboard"})]}),(0,a.jsx)(j.aY,{children:F})]}):(0,a.jsx)("div",{className:l,children:F})};function S(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)(),{isAuthenticated:r,isLoading:i}=(0,d.a)(),n=s.get("returnUrl")||"/dashboard";return((0,t.useEffect)(()=>{!i&&r&&e.push(n)},[r,i,e,n]),i)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})}):(0,a.jsx)(c,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Redirecting..."})]})}),children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Task Manager"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Professional task management dashboard"})]}),(0,a.jsx)(R,{onSuccess:()=>{e.push(n)},onError:e=>{console.error("Login error:",e)},redirectUrl:n,className:"mt-8"}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)("a",{href:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up here"})]})})]})})})}}},function(e){e.O(0,[216,592,744],function(){return e(e.s=37616)}),_N_E=e.O()}]);